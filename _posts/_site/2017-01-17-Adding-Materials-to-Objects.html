<p>In order to take out the jagged edges of the sphere as seen in the last post, the edge pixels must be a blend of the foreground and background. This is done by averaging samples of each material in each pixel. For each pixel, there are several samples within that pixel. Then send rays through each sample. The colors of these rays are averaged.</p>

<p>This difference allows the blending of edge pixels (pixels in between the background and the foreground) as seen in the comparison between the picture from last chapter and the picture after averaging the pixel colors.</p>

<p><img src="/assets/img/out5out6_comparison.jpg" alt="" /></p>

<p>As I moved onto creating more things within the images, I learned to create objects and materials. The fun ensued. More progress and cooler pictures were formed!</p>

<p>The following pictures are examples of diffuse objects that take on the color of their surroundings, adjusted for their own intrinsic color. As Peter Shirley explains in his book, “Light that reflects off a diffuse surface has its direction randomized.” At the same time, the darker the surface is, the more likely absorption is.</p>

<p>The algorithm to create this is as follows (somewhat summarized):</p>

<blockquote>
  <p>Pick a random point <em>s</em> on a unit radius sphere tangent to the hitpoint. Send a ray from the hitpoint <em>p</em> to the random point <em>s</em>. The sphere then has center (p+N), where <em>N</em> is the length of the ray.</p>
</blockquote>

<p>Next Peter Shirley notes:</p>

<blockquote>
  <p>Pick a random point in a unit radius sphere <em>centered at the origin</em> (rather than tangent to the hitpoint) by using a <em>rejection method</em>. Pick a random point in the unit cube where <em>x, y</em> and <em>z</em> range from -1 to +1, rejecting all points that do not fall within the sphere.</p>
</blockquote>

<p>Rejection method is a technique used to generate observations from a distribution.</p>

<p>The described method gives us the following image:</p>

<p><img src="/assets/img/out7.jpg" alt="" /></p>

<p>After we adjust for the image to be ‘gamma corrected’, we see a light gray color in the image:</p>

<p><img src="/assets/img/out8.jpg" alt="" /></p>

<p>Apparently the above picture hosts a “shadow acne problem.” In other word pimply splotches due to rays reflecting off of not at exactly t = 0, but instead at t being very close to zero. In order to remove the “shadow acne problem” we have to better specify to ignore hits very near zero, resulting in the following picture:</p>

<p><img src="/assets/img/out8-without-pimples.jpg" alt="" /></p>
